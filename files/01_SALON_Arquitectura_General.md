# SALON - DocumentaciÃ³n Completa del Proyecto
## Plataforma Global de Belleza y Bienestar (PWA)

**VersiÃ³n:** 1.0  
**Fecha:** Noviembre 2025  
**Autor:** Arquitectura de Sistema

---

## ğŸ“‹ TABLA DE CONTENIDOS

Este proyecto se divide en 10 documentos principales:

1. **Arquitectura General y Diagramas UML** (este documento)
2. **Base de Datos y Modelos de Datos**
3. **DiseÃ±o de Interfaz (UI/UX)**
4. **Seguridad y Cumplimiento**
5. **PolÃ­ticas y Documentos Legales**
6. **Fases de Desarrollo**
7. **MÃ³dulos del Sistema**
8. **APIs y Integraciones**
9. **Plan de ImplementaciÃ³n**
10. **Diagramas Visuales Completos**

---

## 1. RESUMEN EJECUTIVO

### VisiÃ³n General del Proyecto

**Salon** es una Progressive Web Application (PWA) diseÃ±ada para revolucionar la industria de belleza y bienestar, conectando clientes con profesionales de manera eficiente, segura y escalable a nivel global.

### CaracterÃ­sticas Principales

- **Plataforma Multi-Rol:** Cliente, Estilista, Admin Sucursal, Super Admin
- **Sistema de Reservas:** GestiÃ³n inteligente de citas con disponibilidad en tiempo real
- **Pagos Integrados:** Stripe/PayPal con facturaciÃ³n electrÃ³nica automÃ¡tica
- **Portafolio Digital:** Posts estilo Instagram para estilistas
- **Chat en Tiempo Real:** ComunicaciÃ³n directa entre usuarios
- **Analytics Avanzado:** Dashboard con mÃ©tricas y reportes
- **Multi-PaÃ­s:** Soporte para mÃºltiples monedas, idiomas y regulaciones

### Modelo de Negocio

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 MODELO DE INGRESOS                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  1. SUSCRIPCIONES MENSUALES (Sucursales)             â”‚
â”‚     â”œâ”€ Plan Basic: $29/mes                           â”‚
â”‚     â”œâ”€ Plan Premium: $99/mes                         â”‚
â”‚     â””â”€ Plan Enterprise: Personalizado                â”‚
â”‚                                                       â”‚
â”‚  2. COMISIONES POR TRANSACCIÃ“N                       â”‚
â”‚     â””â”€ 7% sobre cada cita completada                 â”‚
â”‚                                                       â”‚
â”‚  3. SERVICIOS ADICIONALES                            â”‚
â”‚     â”œâ”€ Marketing digital                             â”‚
â”‚     â”œâ”€ AnÃ¡lisis de datos avanzado                    â”‚
â”‚     â””â”€ IntegraciÃ³n Hacienda                          â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Stack TecnolÃ³gico

```
FRONTEND:
â”œâ”€â”€ HTML5, CSS3 (Variables CSS)
â”œâ”€â”€ JavaScript ES6+ (Vanilla / Framework opcional)
â”œâ”€â”€ PWA APIs (Service Worker, Cache API, Web App Manifest)
â””â”€â”€ Responsive Design (Mobile-first 360px-1920px)

BACKEND:
â”œâ”€â”€ PHP 8.2+ (API REST)
â”œâ”€â”€ Node.js 18+ (WebSocket para chat/notificaciones)
â””â”€â”€ Python 3.11+ (Scripts de integraciÃ³n Hacienda)

BASE DE DATOS:
â”œâ”€â”€ MySQL 8.0 / PostgreSQL 15 (Datos estructurados)
â”œâ”€â”€ Firestore (Tiempo real: chat, notificaciones)
â””â”€â”€ Redis 7.0 (Cache, sesiones)

INFRAESTRUCTURA:
â”œâ”€â”€ AWS / Google Cloud Platform
â”œâ”€â”€ CDN (CloudFlare)
â”œâ”€â”€ SSL/TLS Certificate
â””â”€â”€ Backup automÃ¡tico diario

INTEGRACIONES:
â”œâ”€â”€ Stripe API (Pagos)
â”œâ”€â”€ Google Maps API (UbicaciÃ³n)
â”œâ”€â”€ Firebase Cloud Messaging (Notificaciones push)
â”œâ”€â”€ Hacienda API Costa Rica (FacturaciÃ³n electrÃ³nica)
â””â”€â”€ SendGrid/AWS SES (Emails)
```

---

## 2. ARQUITECTURA DEL SISTEMA

### 2.1 Diagrama de Arquitectura de Alto Nivel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAPA DE PRESENTACIÃ“N                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Mobile PWA   â”‚  â”‚   Desktop PWA  â”‚  â”‚   Admin Dashboard   â”‚  â”‚
â”‚  â”‚  (360-768px)   â”‚  â”‚  (1024-1920px) â”‚  â”‚   (Super Admin)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                      â”‚                      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   CDN + CACHE   â”‚
                          â”‚   (CloudFlare)  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  LOAD BALANCER  â”‚
                          â”‚   (nginx/HAP)   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                      â”‚                      â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  AUTH SERVICE    â”‚  â”‚   API REST      â”‚  â”‚  WEBSOCKET SRV  â”‚
   â”‚  (JWT/OAuth2.0)  â”‚  â”‚   (PHP/Node)    â”‚  â”‚  (Socket.io)    â”‚
   â”‚  - Login         â”‚  â”‚   - CRUD        â”‚  â”‚  - Chat         â”‚
   â”‚  - Register      â”‚  â”‚   - Business    â”‚  â”‚  - Notif live   â”‚
   â”‚  - Refresh token â”‚  â”‚   - Validation  â”‚  â”‚  - Presence     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                      â”‚                      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                      â”‚                      â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   MySQL/Postgres â”‚  â”‚   Firestore     â”‚  â”‚   Redis Cache   â”‚
   â”‚  (ACID data)     â”‚  â”‚  (Real-time DB) â”‚  â”‚  (Sessions/TTL) â”‚
   â”‚  - Users         â”‚  â”‚  - Messages     â”‚  â”‚  - Tokens       â”‚
   â”‚  - Bookings      â”‚  â”‚  - Notificationsâ”‚  â”‚  - Rate limit   â”‚
   â”‚  - Payments      â”‚  â”‚  - Presence     â”‚  â”‚  - Queue jobs   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                      â”‚                      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                      â”‚                      â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  STORAGE (S3)    â”‚  â”‚  PAYMENT SRV    â”‚  â”‚  EXTERNAL APIs  â”‚
   â”‚  - Photos        â”‚  â”‚  (Stripe)       â”‚  â”‚  - Maps         â”‚
   â”‚  - Documents     â”‚  â”‚  - Webhooks     â”‚  â”‚  - Hacienda     â”‚
   â”‚  - Backups       â”‚  â”‚  - Refunds      â”‚  â”‚  - Email        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Flujo de Datos Principal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENTE (PWA)                                               â”‚
â”‚  â†“                                                           â”‚
â”‚  1. Request HTTP/HTTPS                                      â”‚
â”‚  â†“                                                           â”‚
â”‚  CDN (Si estÃ¡ cacheado, retorna inmediatamente)            â”‚
â”‚  â†“                                                           â”‚
â”‚  2. Load Balancer (Distribuye carga)                        â”‚
â”‚  â†“                                                           â”‚
â”‚  3. API Gateway                                             â”‚
â”‚     â”œâ”€ Valida formato                                       â”‚
â”‚     â”œâ”€ Rate limiting                                        â”‚
â”‚     â””â”€ Routing                                              â”‚
â”‚  â†“                                                           â”‚
â”‚  4. Auth Middleware                                         â”‚
â”‚     â”œâ”€ Verifica JWT token                                   â”‚
â”‚     â”œâ”€ Valida expiraciÃ³n                                    â”‚
â”‚     â””â”€ Extrae usuario y rol                                 â”‚
â”‚  â†“                                                           â”‚
â”‚  5. Business Logic Layer                                    â”‚
â”‚     â”œâ”€ Valida permisos (RBAC)                               â”‚
â”‚     â”œâ”€ Procesa lÃ³gica de negocio                            â”‚
â”‚     â””â”€ Prepara queries                                      â”‚
â”‚  â†“                                                           â”‚
â”‚  6. Data Access Layer                                       â”‚
â”‚     â”œâ”€ MySQL (Transacciones ACID)                           â”‚
â”‚     â”œâ”€ Firestore (Tiempo real)                              â”‚
â”‚     â””â”€ Redis (Cache)                                        â”‚
â”‚  â†“                                                           â”‚
â”‚  7. Response Processing                                     â”‚
â”‚     â”œâ”€ Serializa datos                                      â”‚
â”‚     â”œâ”€ Aplica transformaciones                              â”‚
â”‚     â””â”€ Comprime (gzip)                                      â”‚
â”‚  â†“                                                           â”‚
â”‚  8. Response HTTP + JSON                                    â”‚
â”‚  â†“                                                           â”‚
â”‚  CLIENTE recibe y actualiza UI                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EVENTOS PARALELOS:
â”œâ”€ Logs â†’ ELK Stack / CloudWatch
â”œâ”€ MÃ©tricas â†’ Prometheus / DataDog
â”œâ”€ Notificaciones â†’ Firebase Cloud Messaging
â””â”€ Jobs async â†’ Redis Queue / RabbitMQ
```

---

## 3. DIAGRAMAS UML

### 3.1 Diagrama de Casos de Uso Completo

```
                         SISTEMA SALON (PWA)
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ CLIENTE â”‚            â”‚ESTILISTAâ”‚            â”‚  ADMIN  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                      â”‚                      â”‚
        â”‚                      â”‚                      â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                      â”‚
   â”‚ CASOS USO CLIENTE:   â”‚    â”‚                      â”‚
   â”‚ UC-01: Registrarse   â”‚    â”‚                      â”‚
   â”‚ UC-02: Buscar servs  â”‚    â”‚                      â”‚
   â”‚ UC-03: Ver perfil    â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â†’ (compartido)    â”‚
   â”‚ UC-04: Reservar cita â”‚    â”‚                      â”‚
   â”‚ UC-05: Pagar online  â”‚    â”‚                      â”‚
   â”‚ UC-06: Cancelar cita â”‚    â”‚                      â”‚
   â”‚ UC-07: Dejar reseÃ±a  â”‚    â”‚                      â”‚
   â”‚ UC-08: Chat          â”‚â”€â”€â”€â”€â”¼â”€â”€â”€â†’ (compartido)    â”‚
   â”‚ UC-09: Ver historial â”‚    â”‚                      â”‚
   â”‚ UC-10: Favoritos     â”‚    â”‚                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                      â”‚
                               â”‚                      â”‚
                          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
                          â”‚ CASOS USO ESTILISTA:â”‚    â”‚
                          â”‚ UC-11: Config agendaâ”‚    â”‚
                          â”‚ UC-12: Aceptar cita â”‚    â”‚
                          â”‚ UC-13: Rechazar citaâ”‚    â”‚
                          â”‚ UC-14: Publicar postâ”‚    â”‚
                          â”‚ UC-15: Ver gananciasâ”‚    â”‚
                          â”‚ UC-16: Responder    â”‚    â”‚
                          â”‚        reseÃ±a       â”‚    â”‚
                          â”‚ UC-17: Bloquear     â”‚    â”‚
                          â”‚        horarios     â”‚    â”‚
                          â”‚ UC-18: Ver stats    â”‚    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
                                                     â”‚
                                               â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                               â”‚CASOS USO ADMIN SUCURS:â”‚
                                               â”‚ UC-19: Agregar       â”‚
                                               â”‚        estilista     â”‚
                                               â”‚ UC-20: Gestionar     â”‚
                                               â”‚        servicios     â”‚
                                               â”‚ UC-21: Ver dashboard â”‚
                                               â”‚ UC-22: Config horarioâ”‚
                                               â”‚ UC-23: Generar       â”‚
                                               â”‚        reportes      â”‚
                                               â”‚ UC-24: FacturaciÃ³n   â”‚
                                               â”‚ UC-25: Soporte       â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SUPER ADMIN                                   â”‚
â”‚ UC-26: Aprobar sucursales                                             â”‚
â”‚ UC-27: Ver analytics global                                           â”‚
â”‚ UC-28: Gestionar planes                                               â”‚
â”‚ UC-29: Config comisiones                                              â”‚
â”‚ UC-30: Soporte tÃ©cnico                                                â”‚
â”‚ UC-31: Gestionar usuarios                                             â”‚
â”‚ UC-32: ConfiguraciÃ³n global                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ACTORES EXTERNOS:
â”œâ”€ Â«systemÂ» Stripe API (Procesar pagos)
â”œâ”€ Â«systemÂ» Hacienda API (FacturaciÃ³n)
â”œâ”€ Â«systemÂ» Google Maps (GeocodificaciÃ³n)
â”œâ”€ Â«systemÂ» Email Service (Notificaciones)
â””â”€ Â«systemÂ» SMS Gateway (Recordatorios)
```

### 3.2 Diagrama de Clases (Simplificado - Ver documento completo para detalle)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 <<abstract>>                     â”‚
â”‚                   Usuario                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ # id: int                                        â”‚
â”‚ # email: string                                  â”‚
â”‚ # password: string                               â”‚
â”‚ # rol: RolEnum                                   â”‚
â”‚ # estado: EstadoEnum                             â”‚
â”‚ # configuracion: JSON                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + autenticar(): bool                             â”‚
â”‚ + actualizarPerfil(): void                       â”‚
â”‚ + cambiarPassword(): bool                        â”‚
â”‚ # hashPassword(string): string                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cliente    â”‚ â”‚ Estilista â”‚ â”‚AdminSucursâ”‚ â”‚SuperAdmin â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚-ubicacion    â”‚ â”‚-sucursal  â”‚ â”‚-sucursal  â”‚ â”‚-permisos[]â”‚
â”‚-preferencias â”‚ â”‚-comision% â”‚ â”‚-permisos[]â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚+reservar()   â”‚ â”‚+publicar()â”‚ â”‚+gestionar â”‚
â”‚+cancelar()   â”‚ â”‚+aceptarC()â”‚ â”‚ Estilistasâ”‚
â”‚+reseÃ±ar()    â”‚ â”‚+verGanan()â”‚ â”‚+reportes()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Sucursal                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: int                               â”‚
â”‚ - admin: AdminSucursal                  â”‚
â”‚ - plan: Plan                            â”‚
â”‚ - servicios: Servicio[]                 â”‚
â”‚ - estilistas: Estilista[]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + agregarServicio(Servicio): void       â”‚
â”‚ + removerEstilista(int): void           â”‚
â”‚ + calcularEstadisticas(): Stats         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ 1..*
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Servicio                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: int                               â”‚
â”‚ - nombre: string                        â”‚
â”‚ - precio: Decimal                       â”‚
â”‚ - duracion: int (minutos)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + actualizarPrecio(Decimal): void       â”‚
â”‚ + calcularDisponibilidad(): Slot[]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Cita                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: int                               â”‚
â”‚ - cliente: Cliente                      â”‚
â”‚ - estilista: Estilista                  â”‚
â”‚ - servicio: Servicio                    â”‚
â”‚ - fecha: DateTime                       â”‚
â”‚ - estado: EstadoCita                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + confirmar(): void                     â”‚
â”‚ + cancelar(string motivo): void         â”‚
â”‚ + completar(): void                     â”‚
â”‚ + generarRecordatorio(): Notification   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ 1:1
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Pago                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: int                               â”‚
â”‚ - cita: Cita                            â”‚
â”‚ - monto: Decimal                        â”‚
â”‚ - metodo: MetodoPago                    â”‚
â”‚ - estado: EstadoPago                    â”‚
â”‚ - stripePaymentId: string               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + procesar(): bool                      â”‚
â”‚ + reembolsar(): bool                    â”‚
â”‚ + generarFactura(): Factura             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ENUMS:
â”œâ”€ RolEnum: {cliente, estilista, admin_sucursal, super_admin}
â”œâ”€ EstadoEnum: {activo, suspendido, eliminado}
â”œâ”€ EstadoCita: {pendiente, confirmada, completada, cancelada}
â”œâ”€ MetodoPago: {tarjeta, efectivo, transferencia}
â””â”€ EstadoPago: {pendiente, completado, reembolsado, fallido}
```

### 3.3 Diagrama de Secuencia: Reserva de Cita

```
Cliente    PWA      API Auth   ServiciosCitas  DB    Notif  Estilista
  â”‚         â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚â”€â”€Buscar servicioâ”€â†’â”‚        â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚â”€GET servâ”€â”€â”€â”€â”€â”€â†’  â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚â”€validate token          â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚â†â”€ OK â”€  â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â”€queryâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’     â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â†â”€resultadosâ”€â”€â”€â”€â”‚     â”‚        â”‚
  â”‚         â”‚â†JSONâ”€â”€â”€â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚â†Mostrarâ”€â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚â”€â”€Seleccionar fecha/horaâ”€â”€â†’ â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â”€verificarâ”€â”€â”€â”€â”€â†’      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚ disponibilidadâ”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â†â”€slots libresâ”€â”€      â”‚        â”‚
  â”‚         â”‚â†â”€opcionesâ”€â”€â”€â”€â”€â”€â”€  â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚â”€Confirmar reservaâ”€â”€â†’       â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚â”€POSTâ”€â”€â”€â†’         â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚   cita â”‚â”€validate token          â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚â†â”€OKâ”€    â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â”€BEGIN TRANSâ”€â”€â”€â†’      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â”€INSERT citaâ”€â”€â”€â”€      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â”€UPDATE agendaâ”€â”€      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â†â”€cita_idâ”€â”€â”€â”€â”€â”€â”€      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â”€COMMITâ”€â”€â”€â”€â”€â”€â”€â”€â†’      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â”€enviar notifâ”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚               â”‚      â”‚â”€pushâ”€â”€â†’â”‚
  â”‚         â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚â†â”€201 Createdâ”€â”€â”€â”€  â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚  + detalles cita â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚â†Successâ”€â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚  msg    â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€WebSocket: cita actualizadaâ”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚â—„Push    â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚  notif  â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚               â”‚      â”‚        â”‚
  â”‚         â”‚        â”‚         â”‚â”€enviar emailâ”€â”€â†’      â”‚        â”‚
  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€Email confirmaciÃ³nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
```

---

**ContinÃºa en el siguiente documento: 02_SALON_Base_de_Datos.md**

